---
layout: post
author: Lionel Pigou
title: "Procedurally Generated Islands in Meor"
tags: [game development, procedural generation, voxel]
date: 2021-01-01
---

**_Disclaimer_**: The text in this post is generated by an AI chatbot based on a few bullet points.


<!-- Prompt:
Write a blog post in markdown titled "Procedurally Generated Islands in Meor". Go a deeper for each pointer and improve my English writing.
Context: my game Meor is a smooth voxel game that runs mostly on GPU.
Content:
- Islands: generated in chunks of size 16x16x16 using fractals of value noise and gradient noise and then converted to a signed distance field, first a 2D heightmap is generated then some 3D noise is added to create overhangs
- Caves: cave tunnels are generated using a combination of voronoi noise and value noise. The cave SDF is subtracted from the island SDF.
- Trees: Trees are made of voxels and are procedurally generated with all kinds of noise fractals. 100 random trees are generated and saved as a game file. To place the trees, I use a technique called random offset grid. Each cell in the grid contains a tree with a certain probability. This probability is a 2D map with a fractal of gradient noise. The placement of the tree within the cell is also random. We do the same for all other voxel objects like huts for example.
- Grass: grass grows only on certain voxel materials when their is enough sunlight. The grass sprites are placed similar to how the trees are placed with an offset grid.
- Clouds: clouds are made of voxels and are generated in real time every frame across LODs. They are fractals of gradient noise.
-->

{% include youtube.html id="_OJawINEfh4" height="20rem"%}

<!-- ## Islands: From Fractals to Signed Distance Fields -->

The islands in [Meor](/meor) are generated in chunks, each measuring 16x16x16 voxels. The process begins by utilizing value noise and gradient noise fractals to create the foundation. These fractals generate a 2D heightmap, which is then enhanced with the addition of 3D noise to introduce captivating overhangs and intricate terrain features.

{% include image.html url="/assets/images/posts/procgen/1.png" height="15rem" cover=true%}

To optimize rendering and collision detection, the generated islands are converted into signed distance fields (SDF). This conversion allows for efficient calculations of distance and intersection tests, enabling smooth gameplay interactions within the voxel world.

## Caves: A Subterranean Adventure
{% include image.html url="/assets/images/posts/procgen/2.png" height="15rem" cover=true%}

Meor offers more than just picturesque landscapes; it also boasts a vast network of intricate cave systems. The tunnels that wind through the islands are generated using a combination of voronoi noise and value noise algorithms. By subtracting the cave SDF from the island SDF, players can explore the depths of these procedurally generated caves, uncovering hidden treasures and secrets along the way.

## Trees: Flourishing with Procedural Charm
{% include image.html url="/assets/images/posts/procgen/9.png" height="15rem" cover=true%}

The lush forests of Meor are adorned with procedurally generated trees, adding an enchanting touch to the vibrant scenery. The trees themselves are constructed using voxels, allowing for dynamic growth and manipulation. To bring these arboreal wonders to life, Meor employs a variety of noise fractals to generate 100 unique tree designs, which are then saved as part of the game file.

{% include image.html url="/assets/images/posts/procgen/3.png" height="15rem" cover=true%}

Placing these trees throughout the world is achieved through a technique known as a random offset grid. Each cell in the grid contains a tree with a certain probability. This probability is determined by a 2D map featuring a fractal gradient noise pattern. Furthermore, the placement of each tree within its designated cell is randomized, resulting in a visually diverse and captivating forest landscape. This same technique is employed for other voxel objects, such as huts, ensuring the world of Meor is rich with intricate details.

## Grass: Nature's Carpet
{% include image.html url="/assets/images/posts/procgen/8.png" height="15rem" cover=true%}

In Meor, the lushness of the landscape extends beyond the towering trees. Vibrant grass carpets the ground, adding a touch of realism and vitality to the environment. The growth of grass is restricted to specific voxel materials that receive ample sunlight, creating natural and visually pleasing patterns.

Similar to the tree placement technique, grass sprites are positioned using an offset grid. The grid determines the probability of grass appearing in each cell, guided by a 2D fractal gradient noise map. The result is a vivid and immersive landscape, where the grass sways gently in the breeze, breathing life into the world of Meor.

## Clouds: Majestic Pillows in the Sky
{% include image.html url="/assets/images/posts/procgen/10.png" height="15rem" cover=true%}

The skies of Meor are adorned with captivating clouds, each uniquely shaped and generated in real-time. Meor achieves this dynamic cloud system through the use of voxel-based clouds generated frame-by-frame across different levels of detail (LODs). These clouds are formed using fractals derived from gradient noise, resulting in a diverse range of cloud formations and atmospheric conditions. As players explore the islands, the ever-changing skies above provide a breathtaking backdrop to their adventures.
